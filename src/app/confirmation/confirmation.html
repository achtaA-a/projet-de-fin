 <!-- Étape 5: Confirmation -->
 <div *ngIf="currentStep === 5" id="step-5" class="step-content">
    <div class="text-center py-5">
        <div class="mb-4">
            <div class="checkmark-circle">
                <div class="checkmark"></div>
            </div>
        </div>
        
        <h2 class="mb-3">Réservation confirmée !</h2>
        <p class="lead text-muted mb-4">Merci pour votre confiance, {{ passengers[0]?.firstName }} !</p>
        
        <div class="booking-reference mb-4">
            <div class="badge bg-light text-dark p-3">
                <i class="fas fa-ticket-alt me-2"></i>
                <span class="h5 mb-0">N° de réservation: <strong>{{ bookingReference }}</strong></span>
            </div>
        </div>
        
        <div class="alert alert-info text-start mx-auto" style="max-width: 600px;">
            <h5><i class="fas fa-envelope me-2"></i>E-mail de confirmation envoyé</h5>
            <p class="mb-0">
                Nous avons envoyé les détails de votre réservation à 
                <strong>{{ passengers[0]?.email }}</strong>. 
                Vérifiez votre boîte de réception et vos spams.
            </p>
        </div>
        
        <div class="card mt-4 mx-auto" style="max-width: 600px;">
            <div class="card-body">
                <h5 class="card-title mb-4">Récapitulatif de votre réservation</h5>
                
                <div class="flight-summary">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <div class="text-muted small">Aller</div>
                            <div class="h5 mb-0">
                                {{ selectedFlight?.departure }} → {{ selectedFlight?.destination }}
                            </div>
                            <div class="text-muted">
                                {{ selectedFlight?.departureTime | date:'EEEE d MMMM yyyy' }}
                            </div>
                        </div>
                        <div class="text-end">
                            <div class="text-muted small">Vol</div>
                            <div class="h5 mb-0">{{ selectedFlight?.airline }} {{ selectedFlight?.flightNumber }}</div>
                            <div class="text-muted">
                                {{ selectedFlight?.departureTime | date:'HH:mm' }} - 
                                {{ selectedFlight?.arrivalTime | date:'HH:mm' }}
                            </div>
                        </div>
                    </div>
                    
                    <div *ngIf="flightSearch.returnDate" class="mt-4 pt-4 border-top">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="text-muted small">Retour</div>
                                <div class="h5 mb-0">
                                    {{ selectedFlight?.destination }} → {{ selectedFlight?.departure }}
                                </div>
                                <div class="text-muted">
                                    {{ flightSearch.returnDate | date:'EEEE d MMMM yyyy' }}
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="text-muted small">Vol</div>
                                <div class="h5 mb-0">{{ selectedFlight?.airline }} {{ selectedFlight?.returnFlightNumber }}</div>
                                <div class="text-muted">
                                    {{ selectedFlight?.returnDepartureTime | date:'HH:mm' }} - 
                                    {{ selectedFlight?.returnArrivalTime | date:'HH:mm' }}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="passengers-summary mt-4 pt-4 border-top">
                        <h6 class="mb-3">Passagers</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Passager</th>
                                        <th>Type</th>
                                        <th>Siège</th>
                                        <th>Repas</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let p of passengers">
                                        <td>
                                            <div class="fw-bold">{{ p.title }} {{ p.lastName }}</div>
                                            <div class="small text-muted">{{ p.firstName }}</div>
                                        </td>
                                        <td>{{ p.type === 'adult' ? 'Adulte' : 'Enfant' }}</td>
                                        <td>
                                            <span *ngIf="getSeatForPassenger(p)" class="badge bg-light text-dark">
                                                {{ getSeatForPassenger(p) }}
                                            </span>
                                        </td>
                                        <td>
                                            <span *ngIf="getMealForPassenger(p)" class="badge bg-light text-dark">
                                                {{ getMealForPassenger(p) }}
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="price-summary mt-4 pt-4 border-top">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Prix du vol</span>
                            <span>{{ calculateTotal() | currency:'XAF':'symbol':'1.0-0' }}</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Frais de service</span>
                            <span>{{ 5000 | currency:'XAF':'symbol':'1.0-0' }}</span>
                        </div>
                        <div *ngIf="selectedSeats.length > 0" class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Siège(s) réservé(s)</span>
                            <span>{{ selectedSeats.length * 3000 | currency:'XAF':'symbol':'1.0-0' }}</span>
                        </div>
                        <div *ngIf="selectedMeals.length > 0" class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Repas à bord</span>
                            <span>{{ selectedMeals.length * 2500 | currency:'XAF':'symbol':'1.0-0' }}</span>
                        </div>
                        <div class="d-flex justify-content-between fw-bold mt-3 pt-2 border-top">
                            <span>Total payé</span>
                            <span class="text-primary">{{ calculateGrandTotal() | currency:'XAF':'symbol':'1.0-0' }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-5">
            <button class="btn btn-primary me-3" (click)="downloadTicket()">
                <i class="fas fa-download me-2"></i> Télécharger le billet
            </button>
            <button class="btn btn-outline-primary" (click)="goToHomepage()">
                <i class="fas fa-home me-2"></i> Retour à l'accueil
            </button>
            
            <div class="mt-4">
                <p class="text-muted">
                    Vous pouvez gérer votre réservation à tout moment depuis votre 
                    <a href="#" class="text-primary">espace client</a>.
                </p>
            </div>
        </div>
    </div>
</div>
